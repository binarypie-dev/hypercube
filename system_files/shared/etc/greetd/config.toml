[terminal]
# The VT to run the greeter on
vt = 1

[default_session]
# Run vimgreet in cage with foot (lightweight terminal for colors/cursor support)
command = "cage -s -- foot --config=/usr/share/hypercube/config/foot/foot-kiosk.ini vimgreet"
user = "greeter"

[initial_session]
# First boot wizard - runs once as root, then exits to show vimgreet
# Check if regular users exist (UID >= 1000) - if so, skip wizard and remove this block
command = "sh -c 'if getent passwd | awk -F: \"\\$3 >= 1000 && \\$3 < 65534\" | grep -q .; then sed -i \"/^\\[initial_session\\]/,\\$d\" /etc/greetd/config.toml; exit 0; fi; mkdir -p /run/user/0 && export XDG_RUNTIME_DIR=/run/user/0; cage -s -- quickshell -p /usr/share/hypercube/config/quickshell/welcome-mode.qml'"
user = "root"
